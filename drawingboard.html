<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <input type = "text" id = "tasks" name = "tasks" placeholder = "Write your tasks..."></input>
    <button id = "addTask">+</button>
    <div id = "taskList"></div>

    <script>
        const textBox = document.getElementById("tasks");
        const submitButton = document.getElementById("addTask");
        const taskList = document.getElementById("taskList");

        let allTasks = JSON.parse(localStorage.getItem("allTasks")) || []; // This array will contain all notes to be saved into the local storage of the computer
        console.log(allTasks);
        
        renderNotes();

        function Task(text, date) {
            this.text = text;
            this.date = date;
        }

        submitButton.onclick = function submit() {
            const newTask = new Task(textBox.value, new Date())
            allTasks.push(newTask); // Adds notes to a single array
            console.log(allTasks);
            localStorage.setItem("allTasks", JSON.stringify(allTasks)) // Saves array into local storage

            textBox.value = ""; // Clears text box
            renderNotes();
        }

        function renderNotes() {
            taskList.textContent = "";

            for (let i = 0; i < allTasks.length; i++) {
                singleNoteRender(allTasks[i].text, allTasks[i].date, i);
            }
        }

        function singleNoteRender(text, date, index) {
            const task = document.createElement('div');
            task.innerHTML = `
                <input type="checkbox">
                <button class="taskText">${text}</button>
                <span>${date}<span>
                <dialog class="taskEditModal">
                    <span contentEditable="true" class="taskEdit">${text}</span>
                    <button class="deleteButton">Delete</button>
                    <button class="saveButton">Save</button>
                    <button class="closeButton">Close</button>
                </dialog>
            `;

            taskList.appendChild(task);

            const taskText = task.querySelector('.taskText');
            const taskEditModal = task.querySelector('.taskEditModal');
            const taskEdit = task.querySelector('.taskEdit');
            const deleteButton = task.querySelector('.deleteButton');
            const saveButton = task.querySelector('.saveButton');
            const closeButton = task.querySelector('.closeButton');

            taskText.onclick = () => taskEditModal.showModal();

            saveButton.onclick = () => {
                taskEditModal.close();
                allTasks[index].text = taskEdit.textContent;
                localStorage.setItem("allTasks", JSON.stringify(allTasks));
                renderNotes();
            };

            closeButton.onclick = () => {
                taskEditModal.close();
                taskEdit.textContent = text;
            };

            deleteButton.onclick = () => {
                allTasks.splice(index, 1);
                localStorage.setItem("allTasks", JSON.stringify(allTasks));
                renderNotes();
            };
        }
    </script>
</body>
</html>

<!--
Roadmap
- Progress bar
- Adding goals
- Plant animation

To-do list
    - Adding tasks
        - Similar adding notes to the note taking website
    - Need to add check marks
    - Editing and deleting tasks using modals
        - Close and save buttons are different

Basing tasks on days
    - To-do list has to be based on days
        - Date of task is displayed (date is set to today by default)
        - Date of task can be edited
    - Checked disappear after the day ends (no matter the set date)
    - Unchecked don't disappear after the day ends (switches to exclamation point if past due date)

Progress bar
- Progress bar updates based on to-do list
- Progress bar animation (styling)

- Plant animation (we are not finishing this)
-->